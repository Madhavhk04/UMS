{% extends "base.html" %}

{% block title %}Manage Placements - Admin Panel{% endblock %}
{% block page_title %}Manage Placements{% endblock %}

{% block content %}
<div class="admin-grid">
    <div class="admin-panel">
        <div class="panel-header">
            <h3><i class="fas fa-briefcase"></i> Active Placement Drives</h3>
        </div>
        <div class="table-container">
            <table class="admin-table">
                <thead>
                    <tr>
                        <th>Company</th>
                        <th>Position</th>
                        <th>Date</th>
                        <th>Min CGPA</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for drive in drives %}
                    <tr>
                        <td>{{ drive.company_name }}</td>
                        <td>{{ drive.position }}</td>
                        <td>{{ drive.drive_date }}</td>
                        <td>{{ drive.min_cgpa }}</td>
                        <td><span
                                class="badge {% if drive.status == 'Open' %}badge-success{% else %}badge-info{% endif %}">{{
                                drive.status }}</span></td>
                        <td>
                            <a href="{{ url_for('admin_delete_drive', drive_id=drive.id) }}" class="btn-icon delete-btn"
                                title="Delete Drive"
                                onclick="return confirm('Are you sure you want to delete this drive?')">
                                <i class="fas fa-trash"></i>
                            </a>
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="6" class="text-center">No placement drives found.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="admin-panel">
        <div class="panel-header">
            <h3><i class="fas fa-plus-circle"></i> Add New Drive</h3>
        </div>
        <form action="{{ url_for('admin_add_drive') }}" method="POST" class="admin-form">
            <div class="form-group">
                <label for="company_name">Company Name</label>
                <input type="text" id="company_name" name="company_name" required>
            </div>
            <div class="form-group">
                <label for="position">Position</label>
                <input type="text" id="position" name="position" required>
            </div>
            <div class="form-group">
                <label for="eligibility">Eligibility Criteria</label>
                <input type="text" id="eligibility" name="eligibility" required
                    placeholder="e.g. No backlogs, B.Tech CSE">
            </div>
            <div class="form-group">
                <label for="drive_date">Drive Date</label>
                <input type="date" id="drive_date" name="drive_date" required>
            </div>
            <div class="form-group">
                <label for="min_cgpa">Minimum CGPA</label>
                <input type="number" step="0.1" id="min_cgpa" name="min_cgpa" required>
            </div>
            <div class="form-group">
                <label for="description">Description (Prompt)</label>
                <textarea id="description" name="description" rows="4" required></textarea>
            </div>
            <button type="submit" class="btn btn-primary btn-block">Add Placement Drive</button>
        </form>
    </div>
</div>

<style>
    .admin-grid {
        display: grid;
        grid-template-columns: 1.5fr 1fr;
        gap: 25px;
    }

    .admin-panel {
        background: #fff;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    }

    .panel-header {
        margin-bottom: 20px;
        border-bottom: 1px solid #eee;
        padding-bottom: 10px;
    }

    .table-container {
        overflow-x: auto;
    }

    .admin-table {
        width: 100%;
        border-collapse: collapse;
    }

    .admin-table th,
    .admin-table td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #eee;
    }

    .badge {
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
        color: #fff;
    }

    .badge-success {
        background: #28a745;
    }

    .badge-info {
        background: #17a2b8;
    }

    .btn-icon {
        color: #dc3545;
        font-size: 1.1rem;
    }

    .admin-form .form-group {
        margin-bottom: 15px;
    }

    .admin-form label {
        display: block;
        margin-bottom: 5px;
        font-weight: 500;
    }

    .admin-form input,
    .admin-form textarea {
        width: 100%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 8px;
    }

    .btn-block {
        width: 100%;
        padding: 12px;
    }

    @media (max-width: 992px) {
        .admin-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}